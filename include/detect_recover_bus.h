// Detect and recover the bus if necessary function prototype:
int detect_recover_bus(void);